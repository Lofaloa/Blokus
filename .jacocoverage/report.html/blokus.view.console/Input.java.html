<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Input.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;47923_Blokus&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">blokus.view.console</a> &gt; <span class="el_source">Input.java</span></div><h1>Input.java</h1><pre class="source lang-java linenums">package blokus.view.console;

import blokus.model.Blokus;
import java.util.Arrays;
import java.util.Locale;
import java.util.Scanner;
import static java.lang.Integer.parseInt;

/**
 * Manages the input of the user.
 *
 * @author Logan Farci (47923)
 */
class Input {

    private final Scanner in;
    private final String[] commandsNames;
    private final Blokus game;
    private final Output display;

<span class="nc" id="L21">    public Input(Blokus game) {</span>
<span class="nc" id="L22">        this.in = new Scanner(System.in);</span>
<span class="nc" id="L23">        this.commandsNames = new String[]{&quot;show&quot;, &quot;stock&quot;, &quot;play&quot;};</span>
<span class="nc" id="L24">        this.game = game;</span>
<span class="nc" id="L25">        this.display = new Output(game);</span>
<span class="nc" id="L26">    }</span>

    /**
     * Reads the current a command.
     *
     * @return the tokens of the read command.
     */
    String[] readCommand() {
<span class="nc" id="L34">        display.printPrompt();</span>
<span class="nc" id="L35">        String line = in.nextLine();</span>
<span class="nc bnc" id="L36" title="All 2 branches missed.">        while (line.length() == 0) {</span>
<span class="nc" id="L37">            display.printPrompt();</span>
<span class="nc" id="L38">            line = in.nextLine();</span>
        }
<span class="nc" id="L40">        return line.split(&quot;\\s+&quot;);</span>
    }

    /**
     * Tells if the given string is a command name.
     *
     * @param str is the string to analyze.
     * @return true if the given string is a command name.
     */
    boolean isCommandName(String str) {
<span class="nc" id="L50">        return Arrays.asList(commandsNames).contains(str);</span>
    }

    /**
     * Makes sure that the given string is a command name. Three commands are
     * known: show, stock and place.
     *
     * @param str is the string to parse.
     * @return the given command name.
     * @throws IllegalArgumentException if the given string is not a command.
     */
    String requireCommandName(String str) {
<span class="nc bnc" id="L62" title="All 2 branches missed.">        if (!isCommandName(str.toLowerCase(Locale.getDefault()))) {</span>
<span class="nc" id="L63">            throw new IllegalArgumentException(&quot;\&quot;&quot; + str + &quot;\&quot; is not &quot;</span>
                    + &quot;a command.&quot;);
        }
<span class="nc" id="L66">        return str;</span>
    }

    /**
     * ]
     * Plays the identified piece at the given board position.
     *
     * @param pieceId is the id of a piece.
     * @param row is the row of the board.
     * @param column is the column of the board.
     */
    void play(int pieceId, int row, int column) {
<span class="nc" id="L78">        game.selectCurrentPlayerPiece(pieceId);</span>
<span class="nc" id="L79">        game.placePiece(row, column);</span>
<span class="nc" id="L80">        game.nextPlayer();</span>
<span class="nc" id="L81">    }</span>

    /**
     * Executes the command represented by the given tokens.
     *
     * @param tokens are the tokens representing the command to execute.
     */
    void executeCommand(String[] tokens) {
<span class="nc bnc" id="L89" title="All 2 branches missed.">        if (tokens.length == 0) {</span>
<span class="nc" id="L90">            throw new IllegalArgumentException(&quot;No command to execute.&quot;);</span>
        }
<span class="nc bnc" id="L92" title="All 14 branches missed.">        switch (requireCommandName(tokens[0])) {</span>
            case &quot;play&quot;:
<span class="nc bnc" id="L94" title="All 2 branches missed.">                if (tokens.length &lt; 4) {</span>
<span class="nc" id="L95">                    throw new IllegalArgumentException(&quot;For playing a piece, &quot;</span>
                            + &quot;please enter its id and the position where to &quot;
                            + &quot;place it.&quot;);
                }
<span class="nc" id="L99">                play(parseInt(tokens[1]), parseInt(tokens[2]), parseInt(tokens[3]));</span>
<span class="nc" id="L100">                break;</span>
            case &quot;show&quot;:
<span class="nc" id="L102">                display.printBoard();</span>
<span class="nc" id="L103">                break;</span>
            case &quot;stock&quot;:
<span class="nc" id="L105">                display.printCurrentPlayerStock();</span>
                break;
        }
<span class="nc" id="L108">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>